{{ define "content" }}
<section class="hero hero--slim">
    <div class="hero-content">
        <h1 class="page-title">–í—Å–µ —Å–±–æ—Ä–Ω–∏–∫–∏</h1>
        <p class="muted">–ü—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞–π—Ç–µ –Ω–∞—É—á–Ω—ã–µ —Å–±–æ—Ä–Ω–∏–∫–∏, –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç–µ –∫ –ø—É–±–ª–∏–∫–∞—Ü–∏—è–º –∏ —Å–∫–∞—á–∏–≤–∞–π—Ç–µ PDF.</p>
    </div>
</section>

<div style="margin-bottom: 18px">
    <a href="/article" class="btn btn-primary">–ü–æ–¥–∞—Ç—å —Å—Ç–∞—Ç—å—é</a>
</div>


{{ if not .Collections }}
<div class="empty-state">
    <div class="empty-icon">üìö</div>
    <h2>–ü–æ–∫–∞ –ø—É—Å—Ç–æ</h2>
    <p class="muted">–ó–¥–µ—Å—å –ø–æ—è–≤—è—Ç—Å—è —Å–±–æ—Ä–Ω–∏–∫–∏, –∫–∞–∫ —Ç–æ–ª—å–∫–æ –æ–Ω–∏ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã.</p>
</div>
{{ else }}
<div class="grid">
    {{ range .Collections }}
    <article class="card reveal" data-tilt>
        {{ if .CoverImage }}
        <a href="/collections/{{ .ID }}">
            <img class="card-cover" src="{{ .CoverImage }}" alt="–û–±–ª–æ–∂–∫–∞: {{ .Title }}" loading="lazy" />
        </a>
        {{ else }}
        <a href="/collections/{{ .ID }}" class="card-cover card-cover--placeholder">–ù–µ—Ç –æ–±–ª–æ–∂–∫–∏</a>
        {{ end }}

        <div class="card-body">
            <h2 class="card-title">
                <a href="/collections/{{ .ID }}" style="text-decoration:none; color:inherit">
                    {{ .Title }}
                </a>
            </h2>

            <div class="meta">
                {{ if .ReleaseYear }}<span class="meta-chip">–ì–æ–¥: {{ .ReleaseYear }}</span>{{ end }}
                {{ if .ReleaseNumber }}<span class="meta-chip">‚Ññ {{ .ReleaseNumber }}</span>{{ end }}
            </div>

            {{ if .Description }}
            <p class="card-desc">{{ .Description }}</p>
            {{ end }}

            <div class="card-actions">
                {{ if .PublicationLink }}
                <a href="{{ .PublicationLink }}" target="_blank" class="btn btn-ghost">–ü—É–±–ª–∏–∫–∞—Ü–∏—è</a>
                {{ end }}
                {{ if .PDFPath }}
                <a href="{{ .PDFPath }}" class="btn btn-primary" download>–°–∫–∞—á–∞—Ç—å PDF</a>
                {{ end }}
            </div>
        </div>
    </article>
    {{ end }}
</div>
{{ end }}

<!-- –ú–∏–Ω–∏-JS: –∞–Ω–∏–º–∞—Ü–∏–∏ –ø–æ—è–≤–ª–µ–Ω–∏—è + –ª—ë–≥–∫–∏–π ¬´tilt¬ª —É –∫–∞—Ä—Ç–æ—á–µ–∫ -->
<script>
    // reveal-on-scroll
    const items = document.querySelectorAll('.reveal');
    const io = new IntersectionObserver((entries)=>{
        entries.forEach(e=>{
            if (e.isIntersecting) {
                e.target.classList.add('is-visible');
                io.unobserve(e.target);
            }
        });
    }, {threshold: 0.15});
    items.forEach(el=>io.observe(el));

    // –ª—ë–≥–∫–∏–π ¬´tilt¬ª –ø—Ä–∏ –¥–≤–∏–∂–µ–Ω–∏–∏ –º—ã—à–∏
    const prefersReduced = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
    if (!prefersReduced) {
        document.querySelectorAll('[data-tilt]').forEach(card=>{
            card.addEventListener('mousemove', (e)=>{
                const r = card.getBoundingClientRect();
                const x = (e.clientX - r.left) / r.width - 0.5;
                const y = (e.clientY - r.top) / r.height - 0.5;
                card.style.transform = `translateY(-2px) rotateX(${ -y*3 }deg) rotateY(${ x*4 }deg)`;
            });
            card.addEventListener('mouseleave', ()=>{
                card.style.transform = '';
            });
        });
    }
</script>
{{ end }}
