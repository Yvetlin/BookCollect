{{ define "content" }}
<section class="hero hero--slim">
  <div class="hero-content">
    <h1 class="page-title">Админ · Сборники</h1>
    <p class="muted">Создание, редактирование, удаление сборников.</p>
  </div>
</section>

<div style="display:flex; gap:8px; margin-bottom:12px">
  <button class="btn btn-primary" id="btnNew">Новый сборник</button>
  <a href="/admin/panel/articles" class="btn btn-ghost">Заявки</a>
</div>

<table id="tbl" style="width:100%; border-collapse:collapse; border:1px solid var(--border)">
  <thead>
  <tr style="background: color-mix(in oklab, var(--surface), transparent 6%)">
    <th style="text-align:left; padding:8px; border-bottom:1px solid var(--border)">ID</th>
    <th style="text-align:left; padding:8px; border-bottom:1px solid var(--border)">Название</th>
    <th style="text-align:left; padding:8px; border-bottom:1px solid var(--border)">Год / №</th>
    <th style="text-align:left; padding:8px; border-bottom:1px solid var(--border)">Действия</th>
  </tr>
  </thead>
  <tbody></tbody>
</table>

<!-- простое модальное окно -->
<dialog id="dlg" style="border:1px solid var(--border); border-radius:14px; padding:16px; width:min(720px, 92%)">
  <form id="frm" enctype="multipart/form-data">
    <input type="hidden" name="id" />
    <div style="display:grid; gap:10px">
      <label>Название <input name="title" required style="width:100%; height:40px; padding:0 10px; border:1px solid var(--border); border-radius:10px"></label>
      <div style="display:grid; grid-template-columns:1fr 1fr; gap:10px">
        <label>Год <input name="release_year" type="number" min="1900" max="2100" style="width:100%; height:40px; padding:0 10px; border:1px solid var(--border); border-radius:10px"></label>
        <label>Номер <input name="release_number" type="number" min="1" style="width:100%; height:40px; padding:0 10px; border:1px solid var(--border); border-radius:10px"></label>
      </div>
      <label>Описание <textarea name="description" rows="4" style="width:100%; padding:10px; border:1px solid var(--border); border-radius:10px"></textarea></label>
      <label>Публикация (URL) <input name="publication_link" type="url" style="width:100%; height:40px; padding:0 10px; border:1px solid var(--border); border-radius:10px"></label>
      <label>Обложка (JPEG/PNG) <input name="cover" type="file" accept=".jpg,.jpeg,.png"></label>
      <label>PDF файла сборника <input name="pdf" type="file" accept=".pdf"></label>
    </div>

    <div id="alert" class="muted" style="margin-top:10px"></div>
    <div style="display:flex; gap:8px; margin-top:10px">
      <button class="btn btn-primary" type="submit">Сохранить</button>
      <button class="btn btn-ghost" type="button" id="btnClose">Отмена</button>
    </div>
  </form>
</dialog>

<script src="/static/scripts/admin.js"></script>
<script>
  // ====== ENDPOINTS (проверь пути под твой API) ======
  window.ADMIN_CFG = {
    listCollections:   '/api/collections',          // список (JSON) — можно использовать публичный
    createCollection:  '/admin/collection',         // POST multipart
    updateCollection:  (id)=> `/admin/collection/${id}`, // PUT multipart
    deleteCollection:  (id)=> `/admin/collection/${id}`, // DELETE
  };
  window.initAdminCollections && window.initAdminCollections();
</script>
{{ end }}
